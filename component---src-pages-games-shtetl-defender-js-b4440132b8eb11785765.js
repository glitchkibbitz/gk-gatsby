(self.webpackChunkglitch_kibbitz=self.webpackChunkglitch_kibbitz||[]).push([[686],{8546:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var i=n(7294),r=n(1633),a=function(e,t){if(!e.initializing)return e;switch(t.mode){case"progress":case"indeterminate":case"notice":case"hidden":break;default:throw new Error("Invalid status mode")}return{mode:t.mode,msg:t.msg,percent:t.percent||0,initializing:!t.initialized}},l=(0,i.createContext)([{mode:"",initializing:!0},function(){}]),c=function(e){var t=e.notice,n=e.percent,r=void 0===n?0:n,a=e.indeterminate,l=void 0!==a&&a;return i.createElement("div",{id:"status"},l?i.createElement("div",{id:"status-indeterminate",onContextMenu:function(e){return e.preventDefault()}},i.createElement("div",null),i.createElement("div",null),i.createElement("div",null),i.createElement("div",null),i.createElement("div",null),i.createElement("div",null),i.createElement("div",null),i.createElement("div",null)):i.createElement("div",{id:"status-progress",onContextMenu:function(e){return e.preventDefault()}},i.createElement("div",{id:"status-progress-inner",style:{width:r+"%"}})),t&&i.createElement("div",{id:"status-notice",className:"godot"},t))},s=function(e){var t=e.children,n=(0,i.useReducer)(a,{mode:"indeterminate",initializing:!0}),r=n[0],s=n[1];return i.createElement(l.Provider,{value:[r,s]},"hidden"!==r.mode&&i.createElement(c,{notice:r.msg,percent:r.percent,indeterminate:"indeterminate"===r.mode}),t)};function u(e){var t=e.message||e;return console.error(t),{msg:t,mode:"notice",initialized:!0}}var d=function(e){var t=e.engine,n=e.execname,r=e.width,a=void 0===r?480:r,c=e.height,s=void 0===c?300:c,d=(0,i.useRef)(null),o=(0,i.useState)(null),m=o[0],f=o[1],h=(0,i.useContext)(l),v=h[0],p=h[1];(0,i.useEffect)((function(){t.isWebGLAvailable()?(p({mode:"indeterminate"}),f(new t)):p(u("WebGL not available"))}),[t]);var E=n+".pck";return(0,i.useEffect)((function(){m&&(m.startGame(n,E).then((function(){p({mode:"hidden",initialized:!0})})).catch((function(e){return p(u(e))})),m.setProgressFunc((function(e,t){p(t>0?{mode:"progress",percent:e/t}:{mode:"indeterminate"})})))}),[m,E,p]),(0,i.useEffect)((function(){m&&m.setCanvas(d.current)}),[m,d.current]),i.createElement("canvas",{ref:d,id:"canvas",width:a,height:s,style:{display:v.initializing?"hidden":"block"}},"HTML5 canvas appears to be unsupported in the current browser.",i.createElement("br",null),"Please try updating or use a different browser.")},o=function(e){var t,n,r=e.execname,a=e.resize,l=void 0!==a&&a,c=e.width,u=e.height,o=e.params,m=(0,i.useRef)(null),f=(0,i.useState)(null),h=f[0],v=f[1],p=(0,i.useState)([c,u]),E=p[0],b=p[1];return t=r+".js",n=function(){var e=window;v((function(){return e.Engine}))},(0,i.useEffect)((function(){var e=document.createElement("script");return e.src=t,e.async=!0,e.onload=n,document.body.appendChild(e),function(){document.body.removeChild(e)}}),[t]),(0,i.useEffect)((function(){l&&m.current&&b([m.current.clientWidth,m.current.clientHeight])}),[l,m.current]),i.createElement("div",{id:"wrap",ref:m},i.createElement(s,null,h&&i.createElement(d,{engine:h,execname:r,width:E[0],height:E[1],params:o})))},m=n(9).ZP.div.withConfig({displayName:"shtetlDefender__ShtetlDefender",componentId:"sc-17qd23k-0"})(["height:1000px !important;"]);function f(){return i.createElement(m,null,i.createElement(r.Z,{title:"Starry Shtetl Defender"}),i.createElement("h1",null,"Starry Shtetl Defender"),i.createElement("div",{className:"bandcamp-album"},i.createElement("iframe",{title:"Misirlou Sisters by Glitch Kibbitz",style:{border:"0",height:"150px"},src:"https://bandcamp.com/EmbeddedPlayer/album=1366043256/size=large/bgcol=ffffff/linkcol=0687f5/tracklist=false/artwork=small/transparent=true/",seamless:!0},i.createElement("a",{href:"https://glitchkibbitz.bandcamp.com/album/misirlou-sisters"},"Misirlou Sisters by Glitch Kibbitz"))),i.createElement(o,{execname:"/StarryShtetlDefenderExport/Starry Shtetl Defender",resize:!0}))}}}]);
//# sourceMappingURL=component---src-pages-games-shtetl-defender-js-b4440132b8eb11785765.js.map