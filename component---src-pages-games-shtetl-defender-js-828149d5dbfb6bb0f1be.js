(self.webpackChunkglitch_kibbitz=self.webpackChunkglitch_kibbitz||[]).push([[686],{8546:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var i=n(7294),r=n(1633),a=function(e,t){if(!e.initializing)return e;switch(t.mode){case"progress":case"indeterminate":case"notice":case"hidden":break;default:throw new Error("Invalid status mode")}return{mode:t.mode,msg:t.msg,percent:t.percent||0,initializing:!t.initialized}},c=(0,i.createContext)([{mode:"",initializing:!0},function(){}]),u=function(e){var t=e.notice,n=e.percent,r=void 0===n?0:n,a=e.indeterminate,c=void 0!==a&&a;return i.createElement("div",{id:"status"},c?i.createElement("div",{id:"status-indeterminate",onContextMenu:function(e){return e.preventDefault()}},i.createElement("div",null),i.createElement("div",null),i.createElement("div",null),i.createElement("div",null),i.createElement("div",null),i.createElement("div",null),i.createElement("div",null),i.createElement("div",null)):i.createElement("div",{id:"status-progress",onContextMenu:function(e){return e.preventDefault()}},i.createElement("div",{id:"status-progress-inner",style:{width:r+"%"}})),t&&i.createElement("div",{id:"status-notice",className:"godot"},t))},l=function(e){var t=e.children,n=(0,i.useReducer)(a,{mode:"indeterminate",initializing:!0}),r=n[0],l=n[1];return i.createElement(c.Provider,{value:[r,l]},"hidden"!==r.mode&&i.createElement(u,{notice:r.msg,percent:r.percent,indeterminate:"indeterminate"===r.mode}),t)};function d(e){var t=e.message||e;return console.error(t),{msg:t,mode:"notice",initialized:!0}}var o=function(e){var t=e.engine,n=e.execname,r=e.width,a=void 0===r?480:r,u=e.height,l=void 0===u?300:u,o=(0,i.useRef)(null),s=(0,i.useState)(null),m=s[0],f=s[1],v=(0,i.useContext)(c),h=v[0],E=v[1];(0,i.useEffect)((function(){t.isWebGLAvailable()?(E({mode:"indeterminate"}),f(new t)):E(d("WebGL not available"))}),[t]);var p=n+".pck";return(0,i.useEffect)((function(){m&&(m.startGame(n,p).then((function(){E({mode:"hidden",initialized:!0})})).catch((function(e){return E(d(e))})),m.setProgressFunc((function(e,t){E(t>0?{mode:"progress",percent:e/t}:{mode:"indeterminate"})})))}),[m,p,E]),(0,i.useEffect)((function(){m&&m.setCanvas(o.current)}),[m,o.current]),i.createElement("canvas",{ref:o,id:"canvas",width:a,height:l,style:{display:h.initializing?"hidden":"block"}},"HTML5 canvas appears to be unsupported in the current browser.",i.createElement("br",null),"Please try updating or use a different browser.")},s=function(e){var t,n,r=e.execname,a=e.resize,c=void 0!==a&&a,u=e.width,d=e.height,s=e.params,m=(0,i.useRef)(null),f=(0,i.useState)(null),v=f[0],h=f[1],E=(0,i.useState)([u,d]),p=E[0],g=E[1];return t=r+".js",n=function(){var e=window;h((function(){return e.Engine}))},(0,i.useEffect)((function(){var e=document.createElement("script");return e.src=t,e.async=!0,e.onload=n,document.body.appendChild(e),function(){document.body.removeChild(e)}}),[t]),(0,i.useEffect)((function(){c&&m.current&&g([m.current.clientWidth,m.current.clientHeight])}),[c,m.current]),i.createElement("div",{id:"wrap",ref:m},i.createElement(l,null,v&&i.createElement(o,{engine:v,execname:r,width:p[0],height:p[1],params:s})))};function m(){return i.createElement(i.Fragment,null,i.createElement(r.Z,{title:"Starry Shtetl Defender"}),i.createElement("h1",null,"Starry Shtetl Defender"),i.createElement(s,{execname:"/StarryShtetlDefenderExport/Starry Shtetl Defender"}))}}}]);
//# sourceMappingURL=component---src-pages-games-shtetl-defender-js-828149d5dbfb6bb0f1be.js.map