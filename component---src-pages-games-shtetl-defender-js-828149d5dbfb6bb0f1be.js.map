{"version":3,"sources":["webpack://glitch-kibbitz/./node_modules/react-godot/dist/AsyncLoading.js","webpack://glitch-kibbitz/./node_modules/react-godot/dist/ReactCanvas.js","webpack://glitch-kibbitz/./node_modules/react-godot/dist/index.js","webpack://glitch-kibbitz/./src/pages/games/shtetlDefender.js"],"names":["packLoadingReducer","state","action","initializing","mode","Error","msg","percent","initialized","LoadingContext","createContext","Loading","_a","notice","_b","_c","indeterminate","id","onContextMenu","e","preventDefault","style","width","className","children","useReducer","loadingState","dispatchLoadingAction","Provider","value","toFailure","err","message","console","error","engine","execname","height","canvasRef","useRef","_d","useState","instance","setInstance","_e","useContext","changeLoadingState","useEffect","isWebGLAvailable","pck","startGame","then","catch","setProgressFunc","current","total","setCanvas","ref","display","props","url","onLoad","resize","params","outerRef","setEngine","dimensions","setDimensions","scope","window","Engine","script","document","createElement","src","async","onload","body","appendChild","removeChild","clientWidth","clientHeight","StarryShtetlDefenderPage","Seo","title"],"mappings":"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","file":"component---src-pages-games-shtetl-defender-js-828149d5dbfb6bb0f1be.js","sourcesContent":["import * as React from \"react\";\nimport { createContext, useContext, useReducer } from \"react\";\n\nvar packLoadingReducer = function packLoadingReducer(state, action) {\n  if (!state.initializing) return state;\n\n  switch (action.mode) {\n    case \"progress\":\n    case \"indeterminate\":\n    case \"notice\":\n    case \"hidden\":\n      break;\n\n    default:\n      throw new Error(\"Invalid status mode\");\n  }\n\n  var nextState = {\n    mode: action.mode,\n    msg: action.msg,\n    percent: action.percent || 0,\n    initializing: !action.initialized\n  };\n  return nextState;\n};\n\nvar LoadingContext = createContext([{\n  mode: \"\",\n  initializing: true\n}, function () {}]);\nexport var useLoading = function useLoading() {\n  return useContext(LoadingContext);\n};\n\nvar Loading = function Loading(_a) {\n  var notice = _a.notice,\n      _b = _a.percent,\n      percent = _b === void 0 ? 0 : _b,\n      _c = _a.indeterminate,\n      indeterminate = _c === void 0 ? false : _c;\n  return React.createElement(\"div\", {\n    id: \"status\"\n  }, indeterminate ? React.createElement(\"div\", {\n    id: \"status-indeterminate\",\n    onContextMenu: function onContextMenu(e) {\n      return e.preventDefault();\n    }\n  }, React.createElement(\"div\", null), React.createElement(\"div\", null), React.createElement(\"div\", null), React.createElement(\"div\", null), React.createElement(\"div\", null), React.createElement(\"div\", null), React.createElement(\"div\", null), React.createElement(\"div\", null)) : React.createElement(\"div\", {\n    id: \"status-progress\",\n    onContextMenu: function onContextMenu(e) {\n      return e.preventDefault();\n    }\n  }, React.createElement(\"div\", {\n    id: \"status-progress-inner\",\n    style: {\n      width: percent + \"%\"\n    }\n  })), notice && React.createElement(\"div\", {\n    id: \"status-notice\",\n    className: \"godot\"\n  }, notice));\n};\n\nvar AsyncLoading = function AsyncLoading(_a) {\n  var children = _a.children;\n\n  var _b = useReducer(packLoadingReducer, {\n    mode: \"indeterminate\",\n    initializing: true\n  }),\n      loadingState = _b[0],\n      dispatchLoadingAction = _b[1];\n\n  return React.createElement(LoadingContext.Provider, {\n    value: [loadingState, dispatchLoadingAction]\n  }, loadingState.mode !== \"hidden\" && React.createElement(Loading, {\n    notice: loadingState.msg,\n    percent: loadingState.percent,\n    indeterminate: loadingState.mode === \"indeterminate\"\n  }), children);\n};\n\nexport default AsyncLoading;","import * as React from \"react\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { useLoading } from \"./AsyncLoading\";\n\nfunction toFailure(err) {\n  var msg = err.message || err;\n  console.error(msg);\n  return {\n    msg: msg,\n    mode: \"notice\",\n    initialized: true\n  };\n}\n\nvar ReactCanvas = function ReactCanvas(_a) {\n  var engine = _a.engine,\n      execname = _a.execname,\n      _b = _a.width,\n      width = _b === void 0 ? 480 : _b,\n      _c = _a.height,\n      height = _c === void 0 ? 300 : _c;\n  var canvasRef = useRef(null);\n\n  var _d = useState(null),\n      instance = _d[0],\n      setInstance = _d[1];\n\n  var _e = useLoading(),\n      loadingState = _e[0],\n      changeLoadingState = _e[1];\n\n  useEffect(function () {\n    if (engine.isWebGLAvailable()) {\n      changeLoadingState({\n        mode: \"indeterminate\"\n      });\n      setInstance(new engine());\n    } else {\n      changeLoadingState(toFailure(\"WebGL not available\"));\n    }\n  }, [engine]);\n  var pck = execname + \".pck\";\n  useEffect(function () {\n    if (instance) {\n      instance.startGame(execname, pck).then(function () {\n        changeLoadingState({\n          mode: \"hidden\",\n          initialized: true\n        });\n      }).catch(function (err) {\n        return changeLoadingState(toFailure(err));\n      });\n      instance.setProgressFunc(function (current, total) {\n        if (total > 0) {\n          changeLoadingState({\n            mode: \"progress\",\n            percent: current / total\n          });\n        } else {\n          changeLoadingState({\n            mode: \"indeterminate\"\n          });\n        }\n      });\n    }\n  }, [instance, pck, changeLoadingState]);\n  useEffect(function () {\n    if (instance) {\n      instance.setCanvas(canvasRef.current);\n    }\n  }, [instance, canvasRef.current]);\n  return React.createElement(\"canvas\", {\n    ref: canvasRef,\n    id: \"canvas\",\n    width: width,\n    height: height,\n    style: {\n      display: loadingState.initializing ? \"hidden\" : \"block\"\n    }\n  }, \"HTML5 canvas appears to be unsupported in the current browser.\", React.createElement(\"br\", null), \"Please try updating or use a different browser.\");\n};\n\nexport default ReactCanvas;","/**\n * @function ReactGodot\n */\nimport \"./styles.css\";\nimport * as React from \"react\";\nimport { useEffect, useRef, useState } from \"react\";\nimport AsyncLoading from \"./AsyncLoading\";\nimport ReactCanvas from \"./ReactCanvas\";\n\nvar useScript = function useScript(url, onLoad) {\n  useEffect(function () {\n    var script = document.createElement(\"script\");\n    script.src = url;\n    script.async = true;\n    script.onload = onLoad;\n    document.body.appendChild(script);\n    return function () {\n      document.body.removeChild(script);\n    };\n  }, [url]);\n};\n\nvar ReactGodot = function ReactGodot(props) {\n  var execname = props.execname,\n      _a = props.resize,\n      resize = _a === void 0 ? false : _a,\n      width = props.width,\n      height = props.height,\n      params = props.params;\n  var outerRef = useRef(null);\n\n  var _b = useState(null),\n      engine = _b[0],\n      setEngine = _b[1];\n\n  var _c = useState([width, height]),\n      dimensions = _c[0],\n      setDimensions = _c[1];\n\n  var script = execname + \".js\";\n  useScript(script, function () {\n    var scope = window;\n    setEngine(function () {\n      return scope.Engine;\n    });\n  });\n  useEffect(function () {\n    if (resize && outerRef.current) {\n      setDimensions([outerRef.current.clientWidth, outerRef.current.clientHeight]);\n    }\n  }, [resize, outerRef.current]);\n  return React.createElement(\"div\", {\n    id: \"wrap\",\n    ref: outerRef\n  }, React.createElement(AsyncLoading, null, engine && React.createElement(ReactCanvas, {\n    engine: engine,\n    execname: execname,\n    width: dimensions[0],\n    height: dimensions[1],\n    params: params\n  })));\n};\n\nexport default ReactGodot;","import * as React from 'react'\nimport Seo from '../../components/Seo'\nimport ReactGodot from 'react-godot'\n\nexport default function StarryShtetlDefenderPage() {\n    return (\n        <>\n            <Seo title={\"Starry Shtetl Defender\"} />\n            <h1>Starry Shtetl Defender</h1>\n            <ReactGodot execname='/StarryShtetlDefenderExport/Starry Shtetl Defender' />\n        </>\n    );\n}"],"sourceRoot":""}